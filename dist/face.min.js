/*!
 * emoji-face v1.0.5
 * Copyright 2016, render
 * ISC license
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Face=e():t.Face=e()}(this,function(){return function(t){function e(a){if(i[a])return i[a].exports;var o=i[a]={exports:{},id:a,loaded:!1};return t[a].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){function a(t){return t&&t.__esModule?t:{default:t}}var o,c,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=i(1),s=a(n);!function(a,n){"object"===r(e)&&"undefined"!=typeof t?t.exports=n():(o=n,c="function"==typeof o?o.call(e,i,e,t):o,!(void 0!==c&&(t.exports=c)))}(void 0,function(){var t=function t(e){return void 0!==t.unique?t.unique:(t.unique=this,this.startPosition=0,this.cursorPosition=0,this.endPosition=0,this.faceMap={},this.elemObj=e.elemObj,this.emojiBox=e.emojiBox,this.Debug=!1,this.emojiItemEle=document.getElementsByClassName("emoji-item"),void 0)};return t.prototype.init=function(){this.faceTpl(),this.getCursorPos()},t.prototype.getCursorPos=function(){this.addEvents(this.elemObj,"blur",function(){this.cursorPosition=this.elemObj.selectionStart,this.endPosition=this.elemObj.selectionEnd})},t.prototype.compileFace=function(){var t=this,e=this.elemObj.value.replace(/\[\/([\u4E00-\u9FA5\uF900-\uFA2D]*)\]/g,function(e){var i=t.faceMap[e];return i?'<i class="face-item"style="background-image:url(./images/faces/'+i+'.gif)" ></i>':e});return e},t.prototype.swiperRoll=function(){new s.default({direction:"horizontal"})},t.prototype.setFaceMap=function(){var t=this.faceConfData();for(var e in t)this.faceMap[t[e].faceStr]=t[e].faceId},t.prototype.faceTpl=function(){for(var t=this.faceConfData(),e="",i=0;i<t.length;i++)i%20==0?(i>0&&(e+='<button class="emoji-item delet-emoji"></button></li>'),e+='<li class="item"><button class="emoji-item" data-emoji="'+t[i].faceId+'" title="'+t[i].faceStr+'"></button>'):e+='<button class="emoji-item" data-emoji="'+t[i].faceId+'" title="'+t[i].faceStr+'"></button>',t.length-1==i&&(e+='<button class="emoji-item delet-emoji"></button></li>');this.emojiBox.innerHTML=e,this.setFaceMap(),this.delet(),this.swiperRoll()},t.prototype.addEvents=function(t,e,i){return t.addEventListener?t.addEventListener(e,i.bind(this),!1):t.attachEvent(e,i.bind(this))},t.prototype.faceConfData=function(){var t=[{faceStr:"[/微笑]",faceId:100},{faceStr:"[/撇嘴]",faceId:101},{faceStr:"[/色]",faceId:102},{faceStr:"[/发呆]",faceId:103},{faceStr:"[/得意]",faceId:104},{faceStr:"[/流泪]",faceId:105},{faceStr:"[/害羞]",faceId:106},{faceStr:"[/闭嘴]",faceId:107},{faceStr:"[/睡]",faceId:108},{faceStr:"[/大哭]",faceId:109},{faceStr:"[/尴尬]",faceId:110},{faceStr:"[/发怒]",faceId:111},{faceStr:"[/调皮]",faceId:112},{faceStr:"[/呲牙]",faceId:113},{faceStr:"[/惊讶]",faceId:114},{faceStr:"[/难过]",faceId:115},{faceStr:"[/酷]",faceId:116},{faceStr:"[/冷汗]",faceId:117},{faceStr:"[/抓狂]",faceId:118},{faceStr:"[/吐]",faceId:119},{faceStr:"[/偷笑]",faceId:120},{faceStr:"[/可爱]",faceId:121},{faceStr:"[/白眼]",faceId:122},{faceStr:"[/傲慢]",faceId:123},{faceStr:"[/饥饿]",faceId:124},{faceStr:"[/困]",faceId:125},{faceStr:"[/惊恐]",faceId:126},{faceStr:"[/流汗]",faceId:127},{faceStr:"[/憨笑]",faceId:128},{faceStr:"[/大兵]",faceId:129},{faceStr:"[/奋斗]",faceId:130},{faceStr:"[/咒骂]",faceId:131},{faceStr:"[/疑问]",faceId:132},{faceStr:"[/嘘]",faceId:133},{faceStr:"[/晕]",faceId:134},{faceStr:"[/折磨]",faceId:135},{faceStr:"[/衰]",faceId:136},{faceStr:"[/骷髅]",faceId:137},{faceStr:"[/敲打]",faceId:138},{faceStr:"[/再见]",faceId:139},{faceStr:"[/擦汗]",faceId:140},{faceStr:"[/抠鼻]",faceId:141},{faceStr:"[/鼓掌]",faceId:142},{faceStr:"[/糗大了]",faceId:143},{faceStr:"[/坏笑]",faceId:144},{faceStr:"[/左哼哼]",faceId:145},{faceStr:"[/右哼哼]",faceId:146},{faceStr:"[/哈欠]",faceId:147},{faceStr:"[/鄙视]",faceId:148},{faceStr:"[/委屈]",faceId:149},{faceStr:"[/快哭了]",faceId:150},{faceStr:"[/阴险]",faceId:151},{faceStr:"[/亲亲]",faceId:152},{faceStr:"[/吓]",faceId:153},{faceStr:"[/可怜]",faceId:154},{faceStr:"[/菜刀]",faceId:155},{faceStr:"[/西瓜]",faceId:156},{faceStr:"[/啤酒]",faceId:157},{faceStr:"[/篮球]",faceId:158},{faceStr:"[/乒乓]",faceId:159},{faceStr:"[/咖啡]",faceId:160},{faceStr:"[/饭]",faceId:161},{faceStr:"[/猪头]",faceId:162},{faceStr:"[/玫瑰]",faceId:163},{faceStr:"[/凋谢]",faceId:164},{faceStr:"[/示爱]",faceId:165},{faceStr:"[/爱心]",faceId:166},{faceStr:"[/心碎]",faceId:167},{faceStr:"[/蛋糕]",faceId:168},{faceStr:"[/闪电]",faceId:169},{faceStr:"[/炸弹]",faceId:170},{faceStr:"[/刀]",faceId:171},{faceStr:"[/足球]",faceId:172},{faceStr:"[/瓢虫]",faceId:173},{faceStr:"[/便便]",faceId:174},{faceStr:"[/月亮]",faceId:175},{faceStr:"[/太阳]",faceId:176},{faceStr:"[/礼物]",faceId:177},{faceStr:"[/拥抱]",faceId:178},{faceStr:"[/强]",faceId:179},{faceStr:"[/弱]",faceId:180},{faceStr:"[/握手]",faceId:181},{faceStr:"[/胜利]",faceId:182},{faceStr:"[/抱拳]",faceId:183},{faceStr:"[/勾引]",faceId:184},{faceStr:"[/拳头]",faceId:185},{faceStr:"[/差劲]",faceId:186},{faceStr:"[/爱你]",faceId:187},{faceStr:"[/诺]",faceId:188},{faceStr:"[/喔克]",faceId:189},{faceStr:"[/爱情]",faceId:190},{faceStr:"[/飞吻]",faceId:191},{faceStr:"[/跳跳]",faceId:192},{faceStr:"[/发抖]",faceId:193},{faceStr:"[/怄火]",faceId:194},{faceStr:"[/转圈]",faceId:195},{faceStr:"[/磕头]",faceId:196},{faceStr:"[/回头]",faceId:197},{faceStr:"[/跳绳]",faceId:198},{faceStr:"[/挥手]",faceId:199}];return t},t.prototype.insertText=function(t){if(document.selection){var e=document.selection.createRange();e.text=t}else if("number"==typeof this.elemObj.selectionStart&&"number"==typeof this.elemObj.selectionEnd){this.startPosition=this.elemObj.selectionStart,this.endPosition=this.elemObj.selectionEnd,this.cursorPosition=this.elemObj.selectionStart;var i=this.elemObj.value;this.elemObj.value=i.substring(0,this.cursorPosition)+t+i.substring(this.endPosition,i.length),this.cursorPosition+=t.length,this.startPosition=this.endPosition=this.elemObj.selectionStart=this.elemObj.selectionEnd=this.cursorPosition}else this.elemObj.value+=t},t.prototype.delet=function(){var t=this;this.click(function(){var e=this.attributes[2];"undefined"==typeof e?t.rmEmoji():t.insertText(e.value)})},t.prototype.rmEmoji=function(){var t=this.elemObj.value.substring(0,this.cursorPosition),e=t.length,i=/\[\/([\u4E00-\u9FA5\uF900-\uFA2D]*)\]$/g,a=this.elemObj.value;t=i.test(t)?t.replace(i,""):t.substring(0,t.length-1),this.Debug&&(console.log("删除后字符串"+t),console.log("开始光标"+this.startPosition),console.log("结束光标"+this.endPosition),console.log("当前光标"+this.cursorPosition),console.log("光标前字符串"+t),console.log("textArea值长度:"+a.length),console.log("光标后字符串"+a.substring(this.endPosition,a.length)),console.log("textArea值"+a)),this.elemObj.value=t+a.substring(this.endPosition,a.length),this.cursorPosition=this.endPosition=this.endPosition-(e-t.length)},t.prototype.click=function(t){for(var e=0;e<this.emojiItemEle.length;e++)this.emojiItemEle[e].onclick=t;return this},t})},function(t,e){"use strict";function i(t){this.version="1.4.1",this._default={container:".swiper",pagination:".swiper-pagination",item:".item",paginationItem:".paginationItem",paginationItemActive:"active",direction:"vertical",activeClass:"active",threshold:50,duration:600},this._options=a(this._default,t),this._start={},this._move={},this._end={},this._prev=0,this._current=0,this._offset=0,this._goto=-1,this._eventHandlers={},this.$container=document.querySelector(this._options.container),this.$pagination=document.querySelector(this._options.pagination),this.$paginationItem=this.$pagination.querySelectorAll(this._options.paginationItem),this.$items=this.$container.querySelectorAll(this._options.item),this.count=this.$items.length,this._width=320,this._height=140,this._init(),this._bind()}function a(t,e){for(var i in e)t[i]=e[i];return t}function o(){}i.prototype._init=function(){var t=this,e=t._width,i=t._height,a=e,o=i*t.count;"horizontal"===t._options.direction&&(a=e*t.count,o=i),t.$container.style.width=a+"px",t.$container.style.height=o+"px",Array.prototype.forEach.call(t.$items,function(t,a){t.style.width=e+"px",t.style.height=i+"px"}),t._activate(0)},i.prototype._bind=function(){var t=this;this.$container.addEventListener("touchstart",function(e){t._start.x=e.changedTouches[0].pageX,t._start.y=e.changedTouches[0].pageY,t.$container.style["-webkit-transition"]="none",t.$container.style.transition="none"},!1),this.$container.addEventListener("touchmove",function(e){t._move.x=e.changedTouches[0].pageX,t._move.y=e.changedTouches[0].pageY;var i=t._move.y-t._start.y,a="translate3d(0, "+(i-t._offset)+"px, 0)";"horizontal"===t._options.direction&&(i=t._move.x-t._start.x,a="translate3d("+(i-t._offset)+"px, 0, 0)"),t.$container.style["-webkit-transform"]=a,t.$container.style.transform=a,e.preventDefault()},!1),this.$container.addEventListener("touchend",function(e){t._end.x=e.changedTouches[0].pageX,t._end.y=e.changedTouches[0].pageY;var i=t._end.y-t._start.y;"horizontal"===t._options.direction&&(i=t._end.x-t._start.x),t._prev=t._current,i>t._options.threshold?(t._current=0===t._current?0:--t._current,e.preventDefault()):i<-t._options.threshold&&(t._current=t._current<t.count-1?++t._current:t._current,e.preventDefault()),t._show(t._current)},!1)},i.prototype._show=function(t){this._offset=t*this._height;var e="translate3d(0, -"+this._offset+"px, 0)",i=this;"horizontal"===this._options.direction&&(this._offset=t*this._width,e="translate3d(-"+this._offset+"px, 0, 0)");var a=this._options.duration+"ms";this.$container.style["-webkit-transition"]=a,this.$container.style.transition=a,this.$container.style["-webkit-transform"]=e,this.$container.style.transform=e,clearTimeout(this._timeout),this._timeout=setTimeout(function(){if(i._current!=i._prev||null!==i._timeout||i._goto>-1){i._activate(i._current);var t=i._eventHandlers.swiped||o;t.apply(i,[i._prev,i._current]),i._goto=-1,i._timeout=null}},this._options.duration)},i.prototype._activate=function(t){var e=this._options.activeClass,i=this._options.paginationItemActive;Array.prototype.forEach.call(this.$items,function(i,a){i.classList.remove(e),t===a&&i.classList.add(e)}),Array.prototype.forEach.call(this.$paginationItem,function(e,a){e.classList.remove(i),t===a&&e.classList.add(i)})},i.prototype.go=function(t){if(!(t<0||t>this.count-1||t===this._current))return 0===t?(this._current=0,this._prev=0):(this._current=t,this._prev=t-1),this._goto=t,this._show(this._current),this},i.prototype.next=function(){if(!(this._current>=this.count-1))return this._prev=this._current,this._show(++this._current),this},i.prototype.on=function(t,e){if(this._eventHandlers[t])throw new Error("event "+t+" is already register");if("function"!=typeof e)throw new Error("parameter callback must be a function");return this._eventHandlers[t]=e,this},t.exports=i}])});